<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevFoam - G-code Generator for Foam Cutting</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>DevFoam G-code Generator</h1>
            <p class="subtitle">Hot-Wire Foam Cutting CAD to G-code Converter</p>
        </header>

        <div class="main-content">
            <div class="sidebar">
                <div class="section">
                    <h2>File Upload</h2>
                    <div class="file-upload">
                        <input type="file" id="fileInput" accept=".dxf,.svg,.json">
                        <button id="uploadBtn" class="btn btn-primary">Upload CAD File</button>
                    </div>
                    <div id="fileInfo" class="file-info"></div>
                </div>

                <div class="section">
                    <h2>Cutting Parameters</h2>
                    <div class="param-group">
                        <label for="feedRate">Feed Rate (mm/min):</label>
                        <input type="number" id="feedRate" value="150" min="10" max="500" step="10">
                    </div>
                    <div class="param-group">
                        <label for="safetyHeight">Safety Height (mm):</label>
                        <input type="number" id="safetyHeight" value="10" min="1" max="50" step="1">
                    </div>
                    <div class="param-group">
                        <label for="wireTemp">Wire Temperature (°C):</label>
                        <input type="number" id="wireTemp" value="200" min="100" max="300" step="5">
                    </div>
                    <div class="param-group">
                        <label for="depth">Cut Depth (mm):</label>
                        <input type="number" id="depth" value="0" min="-50" max="0" step="1">
                    </div>
                    <div class="param-group">
                        <label for="units">Units:</label>
                        <select id="units">
                            <option value="mm">Millimeters</option>
                            <option value="in">Inches</option>
                        </select>
                    </div>
                </div>

                <div class="section">
                    <h2>Actions</h2>
                    <button id="generateBtn" class="btn btn-primary" disabled>Generate G-code</button>
                    <button id="downloadBtn" class="btn btn-secondary" disabled>Download G-code</button>
                </div>

                <div class="section">
                    <h2>Canvas Controls</h2>
                    <div class="control-group">
                        <button id="zoomInBtn" class="btn btn-icon">+</button>
                        <button id="zoomOutBtn" class="btn btn-icon">−</button>
                        <button id="resetViewBtn" class="btn btn-small">Reset View</button>
                    </div>
                    <div class="param-group" style="margin-top: 1rem;">
                        <label>
                            <input type="checkbox" id="editModeCheckbox">
                            ✏️ Edit Mode (Click shapes)
                        </label>
                    </div>
                </div>

                <div class="section" id="pathControlSection" style="display: none;">
                    <h2>Path Control</h2>
                    <div id="selectedShapeInfo" class="info-box">
                        Selected: None
                    </div>
                    <div class="param-group">
                        <label for="startPoint">Start Point:</label>
                        <select id="startPoint">
                            <option value="auto">Auto</option>
                        </select>
                    </div>
                    <div class="param-group">
                        <label for="direction">Direction:</label>
                        <select id="direction">
                            <option value="auto">Auto</option>
                            <option value="cw">Clockwise</option>
                            <option value="ccw">Counter-Clockwise</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="main-area">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="canvas">CAD Viewer</button>
                    <button class="tab-btn" data-tab="gcode">G-code Preview</button>
                </div>

                <div id="canvasTab" class="tab-content active">
                    <div class="canvas-container">
                        <canvas id="cadCanvas" width="800" height="600"></canvas>
                        <div id="canvasStatus" class="canvas-status">No file loaded</div>
                    </div>
                </div>

                <div id="gcodeTab" class="tab-content">
                    <div class="gcode-preview">
                        <div class="gcode-stats">
                            <span id="lineCount">0 lines</span>
                        </div>
                        <pre id="gcodeOutput">No G-code generated yet</pre>
                    </div>
                </div>
            </div>
        </div>

        <div id="statusBar" class="status-bar">
            Ready
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}?v=2"></script>
</body>
</html>
